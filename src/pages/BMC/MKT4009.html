<!DOCTYPE html>
<html lang="ko">
    @@include('./common/head.html', {
        pageCSS: ["BMC/BMC"]
    })
<body>
    <article id="popup" class="win-popup-wrap uiForm">
        <header class="pop-header">
            <h1 class="tit"><span>이벤트 참여하기</span></h1>
        </header>
        <section class="pop-conts academy-pop">
            <div class="input-info">
                <div class="tit-wrap">
                    <!-- 210126 수정 - 타이틀 번호 삭제  -->
                    <h2 class="h2-tit">구매정보</h2>
                </div>
                <div class="form-wrap">
                    <dl class="forms">
                        <dt class="tit"><label for="buyerName">구매자 이름</label></dt>
                        <dd class="conts">
                            <span class="input-wrap">
                                <input type="text" name="buyerName" value="" data-required="true" id="buyerName" placeholder="이름을 입력해 주세요.">
                            </span>
                        </dd>
                    </dl>
                    <dl class="forms">
                        <dt class="tit">
                            <label for="buyerPhone">휴대폰</label>
                            <!-- 210126 수정 - 툴팁 삭제
                            <div class="tooltip-wrap"> !-- 활성화시 active --
                                <span class="tooltip-icon ui_tooltip-target">자세히 보기</span>
                                <span class="tooltip-box">
                                    <p>LG전자 회원가입 시 입력한 휴대폰 번호로 응모 됩니다.</p>
                                    <button type="button" class="btn-close"><span class="blind">닫기</span></button>
                                </span>
                            </div> -->
                        </dt>
                        <dd class="conts">
                            <div class="input-wrap">
                                <input type="number" name="buyerPhone" data-required="true" id="buyerPhone" placeholder="‘-’없이 번호만 입력해 주세요.">
                            </div>
                            <!-- 210126 수정 - 돔 추가 -->
                            @@include('./common/modules/bullet-list.html', {
                                "bulletTxt" : [
                                    "LG전자 회원가입 시 입력한 휴대폰 번호로 응모 됩니다."
                                ]
                            })
                            <!-- // 210126 수정 -->
                        </dd>
                    </dl>
                    <dl class="forms">
                        <dt class="tit"><label for="modelName" class="req">모델명<span class="blind">필수입력</span></label></dt>
                        <dd class="conts">
                            <div class="input-wrap">
                                <input type="text" name="modelName" data-required="true" id="modelName" placeholder="모델명을 입력해 주세요.">
                            </div>
                        </dd>
                    </dl>
                    <dl class="forms">
                        <dt class="tit"><label for="serialNum" class="req">제조번호(S/N)<span class="blind">필수입력</span></label></dt>
                        <dd class="conts">
                            <div class="box">
                                <div class="input-wrap">
                                    <input type="text" name="serialNum" data-required="true" id="serialNum" placeholder="S/N을 입력해 주세요.">
                                    <p class="link"><a href="#n" class="btn-link">제품 제조번호 확인방법</a></p>
                                </div>
                                <div class="cell">
                                    <button type="button" class="btn" id="serialCheckBtn"><span>제조번호 확인</span></button>
                                </div>
                            </div>
                        </dd>
                    </dl>
                    <dl class="forms">
                        <dt class="tit"><label for="buyerAddr" class="req">구매자 주소<span class="blind">필수입력</span></label></dt>
                        <dd class="conts">
                            <div class="address-box">
                                <div class="box">
                                    <div class="input-wrap zip-code">
                                        <input type="text" name="buyerAddr" data-required="true" id="buyerAddr" value="05723" placeholder="우편번호" disabled>
                                    </div>
                                    <div class="cell">
                                        <button type="button" class="btn" id="buyerAddrBtn"><span>주소 찾기</span></button>
                                    </div>
                                </div>
                                <div class="input-wrap">
                                    <input type="text" name="buyerAddrInfo" data-required="true" value="" placeholder="주소 찾기를 선택해 주세요." disabled>
                                </div>
                            </div>
                            <div class="input-wrap">
                                <input type="text" name="buyerAddrDetail" data-required="true" placeholder="상세주소를 입력해주세요.">
                            </div>
                        </dd>
                    </dl>
                </div>
            </div>

            <div class="input-info">
                <div class="tit-wrap">
                    <!-- 210126 수정 - 타이틀 번호 삭제 / 체크박스 돔 이동  -->
                    <h2 class="h2-tit">사은품 배송 정보</h2>
                    <div class="chk-input">
                        <span class="chk-wrap">
                            <input type="checkbox" id="info" name="info">
                            <label for="info">구매자 정보와 같음</label>
                        </span>
                    </div>
                    <!-- // 210126 수정  -->
                </div>
                <div class="form-wrap">
                    <dl class="forms">
                        <dt class="tit"><label for="recipientName" class="req">수령자 이름<span class="blind">필수입력</span></label></dt>
                        <dd class="conts">
                            <div class="input-wrap">
                                <input type="text" name="recipientName" data-required="true" id="recipientName" placeholder="이름을 입력해 주세요." value="">
                            </div>
                        </dd>
                    </dl>
                    <dl class="forms">
                        <dt class="tit">
                            <label for="recipientPhone" class="req">휴대폰<span class="blind">필수입력</span></label>
                        </dt>
                        <dd class="conts">
                            <div class="input-wrap">
                                <input type="text" name="recipientPhone" data-required="true" id="recipientPhone" placeholder="‘-’없이 번호만 입력해 주세요.">
                            </div>
                        </dd>
                    </dl>
                    <dl class="forms">
                        <dt class="tit">
                            <label for="recipientAddr" class="req">수령자 주소<span class="blind">필수입력</span></label>
                            <!-- 210126 수정 - 툴팁 삭제
                            <div class="tooltip-wrap"> !-- 활성화시 active --
                                <span class="tooltip-icon ui_tooltip-target">자세히 보기</span>
                                <span class="tooltip-box">
                                    <p>입력한 정보로 배송되니 정확한 배송지를 확인해주세요.<br>
                                    주소는 사은품 발송의 목적으로, 해당 이벤트 참여용으로만 수집합니다.</p>
                                    <button type="button" class="btn-close"><span class="blind">닫기</span></button>
                                </span>
                            </div>
                             -->
                        </dt>
                        <dd class="conts">
                            <div class="address-box">
                                <div class="box">
                                    <div class="input-wrap zip-code">
                                        <input type="text" name="recipientAddr" data-required="true" id="recipientAddr" value="05723" placeholder="우편번호" disabled>
                                    </div>
                                    <div class="cell">
                                        <button type="button" class="btn" id="recipientAddrBtn"><span>주소 찾기</span></button>
                                    </div>
                                </div>
                                <div class="input-wrap">
                                    <input type="text" name="recipientAddrInfo" data-required="true" value="" placeholder="주소 찾기를 선택해 주세요." disabled>
                                </div>
                            </div>
                            <div class="input-wrap">
                                <input type="text" name="recipientAddrDetail" data-required="true" placeholder="상세주소를 입력해주세요.">
                            </div>
                            <!-- 210126 수정 - 돔 추가 -->
                            @@include('./common/modules/bullet-list.html', {
                                "bulletTxt" : [
                                    "입력한 정보로 배송되니 정확한 배송지를 확인해주세요.",
                                    "주소는 사은품 발송의 목적으로, 해당 이벤트 참여용으로만 수집합니다."
                                ]
                            })
                            <!-- // 210126 수정 -->
                        </dd>
                    </dl>
                </div>
            </div>

            <div class="input-info"><!-- 210126 수정 - .input-info 영역 내 돔 변경이 있음 -->
                <div class="input-info-wrap"><!-- 210126 수정 - .input-info-wrap 돔 추가 -->
                    <div class="tit-wrap">
                        <!-- 210126 수정 - 타이틀 번호 삭제  -->
                        <h2 class="h2-tit">개인정보 수집 이용 및 처리 위탁 동의</h2>
                    </div>
                    <!-- 210126 수정 - 필수 표시 변경 -->
                    <p class="tb-tit req">개인정보 수집 이용 동의<span class="blind">필수</span></p>
                    <div class="tb_row tb-bor">
                        <table>
                            <caption>개인정보 수집 이용 동의 수집항목, 목적, 보유기간 안내</caption>
                            <colgroup>
                                <col style="width:25%">
                                <col style="width:25%">
                                <col style="width:25%">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th scope="col">수집항목</th>
                                <th scope="col">목적</th>
                                <th scope="col">보유기간</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td class="al-left">구매자 이름, 구매자 연락처, 구매자 주소</td>
                                <td class="al-left">이벤트 응모내역 확인 시 본인 확인</td>
                                <td rowspan="3" class="al-left">이벤트 종료일로부터 3개월까지 보유 후 파기</td>
                            </tr>
                            <tr>
                                <td class="al-left">수령자 이름, 수령자 연락처</td>
                                <td class="al-left">경품배송 시 본인 확인</td>
                            </tr>
                            <tr>
                                <td class="al-left">수령자 주소</td>
                                <td class="al-left">경품배송</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    @@include('./common/modules/bullet-list.html', {
                        "bulletTxt" : [
                            "귀하께서는 본 동의를 거절하실 수 있습니다. 단, 거절하신 경우 이벤트 참여가 제한될 수 있습니다.",
                            "14세 미만 고객의 경우, 이벤트 참여가 제한됩니다."
                        ]
                    })
                    <div class="agree-input">
                            <span class="chk-wrap">
                                <input type="checkbox" id="chk1-1" name="agreechk-1" data-required="true" >
                                <label for="chk1-1">동의합니다</label>
                            </span>
                    </div>
                </div><!-- 210126 수정 - .input-info-wrap 돔 추가 -->
                <div class="input-info-wrap"><!-- 210126 수정 - 클래스 수정 -->
                    <!-- 210126 수정 - 필수 표시 변경 -->
                    <p class="tb-tit req">개인정보 처리 위탁 동의<span class="blind">필수</span></p>
                    <div class="tb_row tb-bor">
                        <table>
                            <caption>개인정보 처리 위탁 동의 수탁자, 목적 안내</caption>
                            <colgroup>
                                <col style="width:50%">
                                <col style="">
                            </colgroup>
                            <thead>
                                <tr>
                                    <th scope="col">수탁자</th>
                                    <th scope="col">목적</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>(주)LG CNS, 원은</td>
                                    <td>경품 제공 등 이벤트와 관련한 업무</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    @@include('./common/modules/bullet-list.html', {
                        "bulletTxt" : [
                            "경품 제공 등 이벤트 진행을 위한 개인정보 처리 위탁에 동의하셔야 이벤트 참여가 가능합니다."
                        ]
                    })
                    <div class="agree-input">
                        <span class="chk-wrap">
                            <input type="checkbox" id="chk2-1" name="agreechk-2" data-required="true" >
                            <label for="chk2-1">동의합니다</label>
                        </span>
                    </div>
                </div>

                <div class="input-info-wrap"><!-- 210126 수정 - 클래스 수정 -->
                    <p class="tb-tit">개인정보 수집 이용 동의(선택)</p>
                    <div class="tb_row tb-bor">
                        <table>
                            <caption>개인정보 수집 이용 동의 수탁자, 목적, 보유기간 안내</caption>
                            <colgroup>
                                <col style="width:33.3%">
                                <col style="width:33.3%">
                                <col style="">
                            </colgroup>
                            <thead>
                            <tr>
                                <th scope="col">수탁자</th>
                                <th scope="col">목적</th>
                                <th scope="col">보유기간</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>생년, 성별</td>
                                <td>마케팅 또는 통계를 위한 참고 및 활용</td>
                                <td>이벤트 종료일로부터 3개월까지 보유 후 파기</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    @@include('./common/modules/bullet-list.html', {
                        "bulletTxt" : [
                            "귀하께서는 본 동의를 거절하실 수 있습니다."
                        ]
                    })
                    <div class="agree-input">
                        <span class="chk-wrap">
                            <input type="checkbox" id="chk3-1" name="agreechk-3" data-required="true">
                            <label for="chk3-1">동의합니다</label>
                        </span>
                    </div>
                </div>
            </div>

        </section>
        <footer class="pop-footer center">
            <div class="btn-group">
                <button type="button" class="btn pink" id="uiSubmit"><span>신청하기</span></button>
            </div>
        </footer>
        <button type="button" class="win-btn-close ui_modal_close"><span class="blind">닫기</span></button>
    </article>
    
    <script>
        $(function () {
            
            vcui.require(['ui/validation'], function (Validation) {

                // 구매자 정보와 같음
                var addAddressObj = {
                    recipientName:'박종민',
                    recipientPhone:'01023457890',
                    recipientAddr:'02345',
                    recipientAddrInfo:'서울시',
                    recipientAddrDetail:'엘지 송파빌딩 1702호'
                }
                // 구매자 정보를 비움
                var emptyAddAddressObj = {
                    recipientName:'',
                    recipientPhone:'',
                    recipientAddr:'05723',
                    recipientAddrInfo:'',
                    recipientAddrDetail:''
                }
                

                
				var register = {
                    buyerName:{
						value:'',
						required:true
					},
                    buyerPhone:{
						value:'',
						required:true
					},
                    modelName:{
						value:'',
						required:true
					},                    
					// serialNum:{
					// 	required: true,
					// 	value:'',
					// 	validate : function(val){
					// 		var reg = /^\d{3}[A-Za-z]{4}[\d\A-Za-z]{5,7}$/
					// 		return reg.test(val);
					// 	}
					// },
                    // buyerAddr:{
					// 	value:'0555',
					// 	required:true
					// },
                    // buyerAddrInfo:{
					// 	value:'서울시',
					// 	required:true
					// },
                    // buyerAddrDetail:{
					// 	value:'엘지 송파빌딩 1702호',
					// 	required:true
					// },
				}


                $('#serialNum').css('text-transform', 'uppercase');
               


				var validation = new Validation('.uiForm',{register:register});
                
                validation.on('update', function(e){ 

                }).on('errors', function(e,data){
                    console.log('errors', data); 
                    if(data['serialNum'] == undefined && !checkSerialSuccess){
                        lgkorUI.alert("", {title: "제조번호(S/N)를 확인해 주세요."});                        
                    }

                }).on('success', function(data){

                    console.log(validation.getValues());

                }).on('nextfocus', function(e,target){

                    if(target.attr('name') == 'buyerAddrInfo'){
                        setTimeout(function () {
                            $('#buyerAddrBtn').focus();
                        }, 10);                        
                    }

                    if(target.attr('name') == 'recipientAddrInfo'){
                        setTimeout(function () {
                            $('#recipientAddrBtn').focus();
                        }, 10);
                    }

                });

                var checkSerialSuccess = false;

                // 제조번호 확인
                $('#serialCheckBtn').on('click', function(e){

                    var serialRegex = /^\d{3}[A-Za-z]{4}[\d\A-Za-z]{5,7}$/ 
                    checkSerialSuccess = serialRegex.test($('#serialNum').val());

                    if(checkSerialSuccess) {
                        lgkorUI.alert("", {title: "제조번호(S/N)가 확인되었습니다."});
                    } else {
                        lgkorUI.alert("", {title: "해당 제조번호(S/N)가 존재하지 않습니다.<br>제조번호 확인 후 다시 입력해 주세요."});
                    }
                });

                // 구매자 정보와 같음
                $('#info').on('click',function(e){
                    if(e.currentTarget.checked){
                        validation.setValues(addAddressObj);
                    }else{
                        validation.setValues(emptyAddAddressObj);
                    }
                });

                // 구매정보 주소 찾기
                $('#buyerAddrBtn').on('click', function(e){

                });

                // 사은품 주소 찾기
                $('#recipientAddrBtn').on('click', function(e){

                });

                // 
                $('#uiSubmit').on('click', function(){  

                    validation.validate(); 	

                });
            })


        });
        
    </script>

</body>
</html>